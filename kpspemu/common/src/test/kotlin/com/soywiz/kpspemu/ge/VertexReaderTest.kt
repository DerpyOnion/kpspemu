package com.soywiz.kpspemu.ge

import com.soywiz.korio.crypto.Hex
import com.soywiz.korio.stream.openSync
import org.junit.Test
import kotlin.test.Ignore

class VertexReaderTest {
	@Test
	@Ignore
	fun name() {
		val vertices = Hex.decode("" +
			"000000000000000000007fff000080bf000080bf0000803f0000803f00000000" +
			"00007fff000080bf0000803f0000803f0000803f0000803f00007fff0000803f" +
			"0000803f0000803f000000000000000000007fff000080bf000080bf0000803f" +
			"0000803f0000803f00007fff0000803f0000803f0000803f000000000000803f" +
			"00007fff0000803f000080bf0000803f000000000000000000007fff000080bf" +
			"000080bf000080bf0000803f0000000000007fff0000803f000080bf000080bf" +
			"0000803f0000803f00007fff0000803f0000803f000080bf0000000000000000" +
			"00007fff000080bf000080bf000080bf0000803f0000803f00007fff0000803f" +
			"0000803f000080bf000000000000803f00007fff000080bf0000803f000080bf" +
			"0000000000000000007f00ff0000803f000080bf000080bf0000803f00000000" +
			"007f00ff0000803f000080bf0000803f0000803f0000803f007f00ff0000803f" +
			"0000803f0000803f0000000000000000007f00ff0000803f000080bf000080bf" +
			"0000803f0000803f007f00ff0000803f0000803f0000803f000000000000803f" +
			"007f00ff0000803f0000803f000080bf0000000000000000007f00ff000080bf" +
			"000080bf000080bf0000803f00000000007f00ff000080bf0000803f000080bf" +
			"0000803f0000803f007f00ff000080bf0000803f0000803f0000000000000000" +
			"007f00ff000080bf000080bf000080bf0000803f0000803f007f00ff000080bf" +
			"0000803f0000803f000000000000803f007f00ff000080bf000080bf0000803f" +
			"00000000000000007f0000ff000080bf0000803f000080bf0000803f00000000" +
			"7f0000ff0000803f0000803f000080bf0000803f0000803f7f0000ff0000803f" +
			"0000803f0000803f00000000000000007f0000ff000080bf0000803f000080bf" +
			"0000803f0000803f7f0000ff0000803f0000803f0000803f000000000000803f" +
			"7f0000ff000080bf0000803f0000803f00000000000000007f0000ff000080bf" +
			"000080bf000080bf0000803f000000007f0000ff000080bf000080bf0000803f" +
			"0000803f0000803f7f0000ff0000803f000080bf0000803f0000000000000000" +
			"7f0000ff000080bf000080bf000080bf0000803f0000803f7f0000ff0000803f" +
			"000080bf0000803f000000000000803f7f0000ff0000803f000080bf000080bf"
		)
		val s = vertices.openSync()
		val vtype = VertexType(0x0000019F)
		val reader = VertexReader()
		fun readOne() = reader.readOne(s, vtype).toString()
		val numberOfVertices = s.length / vtype.size()

		println(numberOfVertices)

		for (n in 0 until numberOfVertices) {
			println(readOne())
		}
	}

	@Test
	fun name2() {
		val vertices = Hex.decode("" +
			"000000000000000000003f5b3344550000000000000055000000000033440000" +
			"e0011001000000d2010500d31c018012e001100100008012e00110011c0100d2"
		)
		val s = vertices.openSync()
		val vtype = VertexType(0x0080011C)
		val reader = VertexReader()
		fun readOne() = reader.readOne(s, vtype).toString()
		val numberOfVertices = s.length / vtype.size()

		println(numberOfVertices)

		for (n in 0 until numberOfVertices) {
			println(readOne())
		}

		//vertexType: 0x0080011C
		//vertices: 000000000000000000003f5b3344550000000000000055000000000033440000e0011001000000d2010500d31c018012e001100100008012e00110011c0100d2

	}
}